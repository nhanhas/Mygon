<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/locale/pt.js"></script>

    <script type="text/javascript" src="libs/date-picker/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" href="libs/date-picker/css/bootstrap-datetimepicker.min.css" />
    

<script>

    var StepsVO = [];
	jQuery(document).ready(function() { 

        StepsVO = [
            {
                id : 0,
                active : true,
                limit : 20 //Limit of clients for this reservation
            },
            {
                id : 1,
                active : true
            },
            {
                id : 2,
                active : true,
                hours : ['13:30', '14:00', '19:10','20:30','21:00'] //Hours available to book
            },
            {
                id : 3,
                active : true
            },
            {
                id : 4,
                active : true
            }

        ];       

        //#1 - Set Visible/Invisible Breadcrumbs and step views (based on json)
        drawForm();

        //#2 - Fullfill dynamic form views (Step 0 - How many?; Step 2 - What time?)
        drawDynamicForms();

	});


    //#A - Draw Available Breadcrumbs and Form views
    function drawForm(){

        //#1 - Set active breadcrumbs as visible
        for(var i=0; i < StepsVO.length; i++){
            if(StepsVO[i].active){
                $('#step-item-' + StepsVO[i].id).css('display', 'block');            
            }
        }        
        //#2 - Set first as visible (Check what is the next id)
        for(var i=0; i < StepsVO.length; i++){
            if(StepsVO[i].active){
                //#2.2 - Activate first available Step
                $('#step-item-' + StepsVO[i].id).addClass('step-visited');   
                $('#step-' + StepsVO[i].id).css('display', 'flex');
                break;
            }
        }
    } 

    //#B - Draw content of dynamic forms
    function drawDynamicForms(){

        //#1 - get step 0 content
        GET_TEMPLATE_step_0();

        //#2 - get step 2 content
        GET_TEMPLATE_step_2();

    }

    //#C - Next step function
    function nextStep(currentId){
        var nextStepId = -1;
        
        //#1 - Check what is the next id
        for(var i=0; i < StepsVO.length; i++){
            if(currentId < StepsVO[i].id && StepsVO[i].id && StepsVO[i].active){
                nextStepId = StepsVO[i].id;
                break;
            }
        }

        //#2.1 - Deactivate current Step        
        $('#step-' + currentId).css('display', 'none');
        //#2.2 - Activate next Step
        $('#step-item-' + nextStepId).addClass('step-visited');
        $('#step-' + nextStepId).css('display', 'flex');

    }

    //#TEMPLATE# - Step 0 - How Many?
    function GET_TEMPLATE_step_0(){
        
        var template = '';
        //#1 - build list of template
        for(var i=1; i <= StepsVO[0].limit; i++){
            var numberOption = i;
            template += '<div class="step-option-0">'+ numberOption +'</div>'; 
        }

        //#2 - Draw template
        var e = document.getElementById('step-content-0');
        e.innerHTML = template; //replace all html exists in events
        
        //#3 - Add click handlers
        $('.step-option-0').click(function(target){
            $('.step-option-0').removeClass('step-option-0-selected');
            $(target.currentTarget).addClass('step-option-0-selected');
        })

    }

    //#TEMPLATE# - Step 2 - What time?
    function GET_TEMPLATE_step_2(){
        
        var template = '';
        //#1 - build list of template
        for(var i=0; i < StepsVO[2].hours.length; i++){
            var hourOption = StepsVO[2].hours[i];
            template += '<div class="step-option-2">'+ hourOption +'</div>'; 
        }

        //#2 - Draw template
        var e = document.getElementById('step-content-2');
        e.innerHTML = template; //replace all html exists in events
        
        //#3 - Add click handlers
        $('.step-option-2').click(function(target){
            $('.step-option-2').removeClass('step-option-2-selected');
            $(target.currentTarget).addClass('step-option-2-selected');
        })

    }

</script> 

<style>
    /*TEXT COLORS*/
    .text-white{
        color:white;
    }

    .text-green{
        color: #2ec66f;
    }

    .text-gray-light{
        color:#808080de;
    }
    

    .steps-container{
        display: flex;
        flex-direction: row;
        justify-content: space-around;
    }

    .step-item{
        background-color: #e6e6e6;
        width: 100%;
        padding: 10px 0px;

        display:none;/*begin as invisible*/
    }

    .step-item:not(:first-child), .step-item:not(:last-child){
        -webkit-clip-path: polygon(95% 0, 100% 50%, 95% 100%, 0% 100%, 5% 50%, 0% 0%);
        clip-path: polygon(95% 0, 100% 50%, 95% 100%, 0% 100%, 5% 50%, 0% 0%);
    }

    .step-item:first-child{
        -webkit-clip-path: polygon(0 0, 0 100%, 95% 100%, 100% 50%, 95% 0);
        clip-path: polygon(0 0, 0 100%, 95% 100%, 100% 50%, 95% 0);
    }

    .step-item:last-child{
        -webkit-clip-path: polygon(95% 0, 100% 50%, 95% 100%, 0% 100%, 5% 50%, 0% 0%); 
        clip-path: polygon(100% 0%, 100% 50%, 100% 100%, 0% 100%, 5% 50%, 0% 0%);
    }

   
    .step-visited{
        background-color: #808080;
    }


    .step-form{
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;

        display:none;/*begin as invisible*/
    }

    .step-btn-next{
        cursor: pointer;
        background-color: #2ec66f;
        width: 220px;
        padding: 10px;
        font-size: 20px;
    }


    /* STEP 0 CSS */
    #step-content-0{
        width:100%;   
        margin: 30px 0;
    }
    .step-option-0{
        cursor: pointer;
        text-align: center;
        width: 100px;
        height: 50px;
        border: 1px solid #80808057;
        display: inline-block;
        border-radius: 7px;
        padding-top: 15px;
        margin: 5px;
        color: #808080;
        font-weight: bold;
    }

    .step-option-0-selected{
        background-color: #808080;
        color: white;
    }

    /* STEP 1 CSS */
    #step-content-1{
        width:80%;   
        margin: 30px 0;
    }

    /* STEP 2 CSS */
    #step-content-2{
        width:100%;   
        margin: 30px 0;
    }
    .step-option-2{
        cursor: pointer;
        text-align: center;
        width: 100px;
        height: 50px;
        border: 1px solid #80808057;
        display: inline-block;
        border-radius: 7px;
        padding-top: 15px;
        margin: 5px;
        color: #808080;
        font-weight: bold;
    }

    .step-option-2-selected{
        background-color: #808080;
        color: white;
    }

    /* STEP 3 CSS */
    #step-content-3{
        width: 100%;
    }

    .input-form{
        border-style: none;
        border-bottom: 1px solid #80808080;
        width: 100%;
    }
    .input-form:focus{
        outline: none;
        
    }

    .form-input-custom{
        margin-top: 20px;
        margin-bottom: 20px;
    }
    

</style>

</head>

<body>

<div id="sumario" style="margin: 50px 240px 0 240px;">

    <!-- Steps Breadcrumb-->
    <div class="steps-container">

        <div id="step-item-0" class="step-item text-center step-visited">
            <span><i class="fa fa-users fa-2x text-white"></i></span>
        </div>
        
        <div id="step-item-1" class="step-item text-center">
            <span><i class="fa fa-calendar fa-2x text-white"></i></span>
        </div>

        <div id="step-item-2" class="step-item text-center">
            <span><i class="fa fa-clock-o fa-2x text-white"></i></span>
        </div>
        
        <div id="step-item-3" class="step-item text-center">
            <span><i class="fa fa-address-card-o fa-2x text-white"></i></span>
        </div>

        <div id="step-item-4" class="step-item text-center">
            <span><i class="fa fa-check-circle fa-2x text-white"></i></span>
        </div>

    </div>

    <!-- Step Forms -->
    <div class="step-form-container">

        <!-- Step id 0: How many? -->
        <div id="step-0" class="step-form">
            <h3>Quantas pessoas serão?</h3>

            <!-- #TEMPLATE# -->
            <div id="step-content-0" >
                
            </div>

            <!-- Next button -->
            <div class="step-btn-next text-white" onclick="nextStep(0)">
                SEGUINTE
            </div>
        </div>

        <!-- Step id 1: When? -->
        <div id="step-1" class="step-form">
            <h3>Para quando?</h3>

            <!-- #TEMPLATE# -->
            <div id="step-content-1">
                <div style="overflow:hidden;">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-xs-12">
                                <div id="datetimepicker"></div>
                            </div>
                        </div>
                    </div>
                    <script type="text/javascript">
                        $(function () {
                            $('#datetimepicker').datetimepicker({
                                inline: true,
                                locale: 'ru',
                                format: 'D'
                            });
                        });
                    </script>
                </div>
            </div>

            <!-- Next button -->
            <div class="step-btn-next text-white" onclick="nextStep(1)">
                SEGUINTE
            </div>
        </div>

        <!-- Step id 2: What time? -->
        <div id="step-2" class="step-form">
            <h3>A que horas?</h3>

            <!-- #TEMPLATE# -->
            <div id="step-content-2">

            </div>

            <!-- Next button -->
            <div class="step-btn-next text-white" onclick="nextStep(2)">
                SEGUINTE
            </div>
        </div>

        <!-- Step id 3: Personal data -->
        <div id="step-3" class="step-form text-gray-light">
            <h3>Para concluir basta preencher os dados pessoais:</h3>
            <span>Já tem uma conta Mygon? <a class="text-green" href="">Clique aqui</a></span>
            
            <!-- #TEMPLATE# -->
            <div class="row" id="step-content-3">
                <div class="col-xs-8 col-xs-offset-2 form-input-custom">
                    <input type="name" class="input-form" id="name" placeholder="Name">
                </div>

                <div class="col-xs-8 col-xs-offset-2 form-input-custom">
                    <input type="email" class="input-form" id="email" placeholder="E-mail">
                </div>

                <div class="col-xs-8 col-xs-offset-2 form-input-custom">
                    <input type="password" class="input-form" id="password" placeholder="Password">
                </div>

            </div>

            <!-- Next button -->
            <div class="step-btn-next text-white" onclick="nextStep(3)">
                SEGUINTE
            </div>
        </div>

        <!-- Step id 4: Aditional Data -->
        <div id="step-4" class="step-form text-gray-light">
            <h3>Para uma comunicação mais fácil deixe o seu número de telemóvel e alguma informação relevante para o comerciante.</h3>
                        
            <!-- #TEMPLATE# -->
            <div id="step-content-4">

            </div>

            <!-- Next button -->
            <div class="step-btn-next text-white">
                RESERVAR
            </div>
        </div>

    </div>
 

<div>

   

</body>	